<div
  *ngIf="isLoading"
  style="text-align: center; margin-top: 200px; margin-bottom: 200px"
>
  <app-loading-spinner></app-loading-spinner>
</div>
<div *ngIf="!isLoading">
  <div class="container">
    <div class="row mb-5">
      <div class="col-12 col-lg-8">
        <form #infoForm="ngForm" (ngSubmit)="UpdateInfo(infoForm)" class="mb-5">
          <div class="form-group row">
            <label for="email" class="col-3 col-form-label">Email</label>
            <div class="col-9">
              <input
                type="text"
                class="form-control"
                id="email"
                name="email"
                #email="ngModel"
                [(ngModel)]="emailVal"
                disabled
              />
            </div>
          </div>
          <div class="form-group row">
            <label for="firstname*" class="col-3 col-form-label"
              >First Name*</label
            >
            <div class="col-9">
              <input
                type="text"
                class="form-control"
                id="firstname"
                name="firstname"
                #firstname="ngModel"
                required
                [(ngModel)]="firstnameVal"
              />
            </div>
          </div>
          <div class="form-group row">
            <label for="lastname*" class="col-3 col-form-label"
              >Last Name*</label
            >
            <div class="col-9">
              <input
                type="text"
                class="form-control"
                id="lastname"
                name="lastname"
                #lastname="ngModel"
                [(ngModel)]="lastnameVal"
                required
              />
            </div>
          </div>
          <div class="form-group row">
            <label for="phone" class="col-3 col-form-label">Phone*</label>
            <div class="col-9">
              <input
                class="form-control"
                id="phone"
                name="phone"
                [(ngModel)]="phoneVal"
                #Phone="ngModel"
                required
              />
            </div>
          </div>
          <div class="form-group row">
            <div class="col-6 mt-3">
              <button
                type="button"
                (click)="ResetPassword()"
                class="btn btn-dark mt-2 m-auto"
              >
                Reset Password
              </button>
            </div>
            <div class="col-6 mt-3">
              <button
                type="submit"
                [disabled]="!infoForm.valid"
                class="btn btn-dark mt-2 m-auto"
                *ngIf="!isUpdating"
              >
                Update Profile
              </button>
              <button
                [disabled]
                class="btn btn-dark mt-2 m-auto"
                *ngIf="isUpdating"
              >
                <span
                  class="spinner-border spinner-border-sm"
                  role="status"
                  aria-hidden="true"
                ></span>
                Loading...
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  <ng-template #errorContent let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">An Error Has Occurred!</h4>
      <button
        type="button"
        class="close"
        aria-label="Close"
        (click)="modal.dismiss('Cross click')"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <b>Something went wrong. Please try again later! </b>
      <br />
      <button
        type="button"
        class="btn btn-outline-dark mt-3"
        (click)="modal.close('Save click')"
      >
        Close
      </button>
    </div>
  </ng-template>

  <ng-template #resetpassword let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Reset Password</h4>
      <button
        type="button"
        class="close"
        aria-label="Close"
        (click)="modal.dismiss('Cross click')"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <b>Password reset email sent, check your inbox.</b>
      <br />
      <button
        type="button"
        class="btn btn-outline-dark mt-3"
        (click)="modal.close('Save click')"
      >
        Close
      </button>
    </div>
  </ng-template>
</div>
